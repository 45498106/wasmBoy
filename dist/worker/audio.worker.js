'use strict';(function(){function m(a,b){h?self.postMessage(a,b):n.postMessage(a,b)}function p(a,b){a||console.error("workerapi: No callback was provided to onMessage!");if(b)if(h)b.onmessage=a;else b.on("message",a);else if(h)self.onmessage=a;else n.on("message",a)}function c(a,b,d){b||(b=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10),k++,b=`${b}-${k}`,1E5<k&&(k=0));return{workerId:d,messageId:b,message:a}}const h="undefined"!==typeof self;let n;h||(n=require("worker_threads").parentPort);
let k=0;const q=(a)=>{a=(a-1)/127-1;.008>Math.abs(a)&&(a=0);return a/2.5};let l;const r=(a)=>{a=a.data?a.data:a;if(a.message)switch(a.message.type){case "GET_CONSTANTS_DONE":m(c(a.message,a.messageId));break;case "UPDATED":{var b=new Uint8Array(a.message.audioBuffer);var d=a.message.numberOfSamples;const c=new Float32Array(d);var f=new Float32Array(d);let g=0;d*=2;for(var e=0;e<d;e+=2)c[g]=q(b[e]),g++;g=0;for(e=1;e<d;e+=2)f[g]=q(b[e]),g++;b=c.buffer;f=f.buffer}m(c({type:"UPDATED",leftChannel:b,rightChannel:f,
numberOfSamples:a.message.numberOfSamples,fps:a.message.fps,allowFastSpeedStretching:a.message.allowFastSpeedStretching}),[b,f])}};p((a)=>{a=a.data?a.data:a;switch(a.message.type){case "CONNECT":l=a.message.ports[0];p(r,l);m(c(void 0,a.messageId));break;case "GET_CONSTANTS":l.postMessage(c(a.message,a.messageId));break;case "AUDIO_LATENCY":l.postMessage(c(a.message,a.messageId));break;default:console.log(a)}})})();
